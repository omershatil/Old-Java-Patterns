Look at Receiver.java in the Packager project for an example of this pattern.